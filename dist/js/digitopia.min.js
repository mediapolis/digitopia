/*! digitopia 05-03-2016 */
function GetJQueryPlugin(a,b){return function(c){return this.each(function(){var d=$(this);if(this.id||(this.id="DiGiToPiA-"+ ++gResponsiveUniqueId),!d.data(a)){d.addClass("DigitopiaInstance");try{var e=new b(this,c);d.data(a,e),e.stop&&d.on("DigitopiaStop",function(a){a.stopPropagation(),a.target===this&&e.stop()}),e.start&&window.setTimeout(function(){e.start(),$(".DigitopiaInstance").trigger("DigitopiaNewInstance",d)},0)}catch(f){alert("Could not initialize element:"+this.id+" jsclass:"+a+" error:"+f)}}})}}var gResponsiveUniqueId=0,gResponsiveFlashEvents=!0;!function(a){var b=function(b,c){this.element=a(b);var d=this;this.config=a.extend({geometry:void 0,lazy:void 0,ajax:void 0,hijax:void 0,parallax:void 0,coverResize:!1},c||{}),this.start=function(){this.config.geometry&&this.config.geometry.enabled&&(this.config.geometry.controller=this,setTimeout(function(){d.element.digitopiaGeometry(d.config.geometry)},0)),this.config.hijax&&this.config.hijax.enabled&&(this.config.hijax.controller=this,setTimeout(function(){d.element.digitopiaHijax(d.config.hijax)},0)),this.element.lazyInstantiate(),this.instantiateElements(),a(window).unload(function(){a(".DigitopiaInstance").trigger("DigitopiaStart")}),d.scrollTimer=void 0,a(window).scroll(function(){d.scrollTimer||(d.scrollTimer=setTimeout(function(){d.scrollTimer=void 0,a(".DigitopiaInstance").trigger("DigitopiaDidScroll")},250))}),d.resizeTimer=void 0,a("body").outerWidth(a(window).innerWidth()),a(window).resize(function(){d.resizeTimer?clearTimeout(d.resizeTimer):d.config.coverResize&&a("body").css({opacity:.3}),d.resizeTimer=setTimeout(function(){a("body").outerWidth(a(window).innerWidth()),d.resizeTimer=void 0,a(".DigitopiaInstance").trigger("DigitopiaDidResize"),d.config.coverResize&&a("body").css({opacity:1})},100)})},this.stop=function(){},this.instantiateElements=function(){var b=!1;a("*[data-jsclass]").each(function(){for(var c=a(this).data("jsclass").split(","),d=0;d<c.length;d++){var e=c[d];if(!a(this).data(e)){b=!0;var f=null;try{if(a(this)[e])a(this)[e]();else if(f=new window[e](this),a(this).data(e,f),f.start){var g=this;window.setTimeout(function(){f.start(),a(".DigitopiaInstance").trigger("DigitopiaNewInstance",g)},0)}}catch(h){alert("Could not initialize element:"+this.id+" jsclass:"+e+" error:"+h)}}}}),b&&a(".DigitopiaInstance").trigger("DigitopiaReady",this)},this.element.on("DigitopiaInstantiate",function(a){a.stopPropagation(),a.target===this&&(d.instantiateElements(),d.element.data("lazyInstantiate").watchScroll())})};a.fn.digitopiaController=GetJQueryPlugin("digitopiaController",b)}(jQuery),function(a){function b(b,c){this.element=a(b);var d=this;this.start=function(){this.element.on("DigitopiaDidScroll",function(a){a.target===this&&d.watchScroll()}),d.watchScroll()},this.stop=function(){this.element.off("DigitopiaDidScroll")},this.watchScroll=function(){a(".lazy-instantiate:in-viewport").each(function(){if(a(this).is(":visible")){a(this).removeClass("lazy-instantiate");for(var b=a(this).data("lazy-jsclass").split(/,\s*/),c=0;c<b.length;c++)a(this)[b[c]]()}})}}a.fn.lazyInstantiate=GetJQueryPlugin("lazyInstantiate",b)}(jQuery),function(a){var b=function(b,c){this.element=a(b);var d=this;this.orientation=void 0,this.scale=void 0,this.touch=Modernizr.touch,this.disabled=!1,this.forceScale=void 0,this.config=a.extend({breakpoints:[{className:"tiny",maxWidth:480},{className:"small",maxWidth:768},{className:"medium",maxWidth:980},{className:"large",maxWidth:1024},{className:"huge",maxWidth:void 0}],cookieDomain:void 0},c||{}),this.widths=[],this.classes=[],this.disableResponsive=function(b){a("body").addClass("disable-responsive"),this.disabled=!0,this.forceScale=b,this.detectGeometry()},this.enableResponsive=function(){a("body").removeClass("disable-responsive"),this.disabled=!1,this.forceScale="",this.detectGeometry()},this.start=function(){var b=".show-hide{display:none;}\n";this.widths.push(0);for(var c=0;c<this.config.breakpoints.length;c++)this.config.breakpoints[c].maxWidth&&this.widths.push(this.config.breakpoints[c].maxWidth),this.classes.push(this.config.breakpoints[c].className),b+="."+this.config.breakpoints[c].className+" .hidden-"+this.config.breakpoints[c].className+"{display:none;}\n",b+=".not-"+this.config.breakpoints[c].className+" .hidden-not-"+this.config.breakpoints[c].className+"{display:none;}\n",b+="."+this.config.breakpoints[c].className+" .shown-"+this.config.breakpoints[c].className+"{display:block;}\n",b+=".not-"+this.config.breakpoints[c].className+" .shown-not-"+this.config.breakpoints[c].className+"{display:block;}\n";var e=document.createElement("style");e.type="text/css",e.innerHTML=b,document.getElementsByTagName("head")[0].appendChild(e),this.element.on("DigitopiaDidResize.digitopiaGeometry",function(a){a.stopPropagation(),a.target===this&&d.detectGeometry()}),this.detectGeometry(),this.element.on("DigitopiaNewInstance.digitopiaGeometry",function(b,c){b.stopPropagation(),b.target===this&&(a(c).trigger("DigitopiaScaleChanged",d.scale),a(c).trigger("DigitopiaOrientationChanged",d.orientation))})},this.stop=function(){this.element.off("DigitopiaDidResize.digitopiaGeometry"),this.element.off("DigitopiaNewInstance.digitopiaGeometry")},this.detectGeometry=function(){var b=this.orientation,c=this.classes[this.widths.length-1];if(b=a(window).width()<a(window).height()?"portrait":"landscape",this.disabled)c=this.forceScale;else for(var d=a(window).width(),e=0;e<this.widths.length-1;e++)if(d>=this.widths[e]&&d<this.widths[e+1]){c=this.classes[e];break}var f=0;if(c!==this.scale){++f;for(var e=0;e<this.classes.length;e++)this.classes[e]!==c?(a("body").addClass("not-"+this.classes[e]),a("body").removeClass(this.classes[e]),a("body").removeClass("shown-"+this.classes[e]),a("body").removeClass("hidden-"+this.classes[e])):a("body").removeClass("not-"+this.classes[e]);a("body").addClass(c),a("body").addClass("shown-"+c),a("body").addClass("hidden-"+c),a(".DigitopiaInstance").trigger("DigitopiaScaleChanged",c)}this.scale=c,b!==this.orientation&&(++f,a("body").removeClass("portrait").removeClass("landscape"),a("body").addClass(b),a(".DigitopiaInstance").trigger("DigitopiaOrientationChanged",b)),this.orientation=b,f&&this.setHints()},this.setHints=function(){var a="";this.orientation&&(a&&(a+=" "),a+=this.orientation),this.scale&&(a&&(a+=" "),a+=this.scale),a!==this.getCookie("responsive")&&this.setCookie("responsive",a)},this.getCookie=function(b){return a.cookie(b)},this.setCookie=function(b,c,d){var e={path:"/",domain:this.config.cookieDomain,expires:d};a.cookie(b,c,e)},this.deleteCookie=function(a){this.setCookie(a,null)}};a.fn.digitopiaGeometry=GetJQueryPlugin("digitopiaGeometry",b)}(jQuery),function(a){var b=function(b,c){this.element=a(b);var d=this;this.element.css({position:"relative",overflow:"hidden"}),this.settings=a.extend({crop:a(this.element).data("crop")?a(this.element).data("crop"):!1,align:a(this.element).data("align")?a(this.element).data("align"):"center",blowup:a(this.element).data("blowup")?a(this.element).data("blowup"):!1,trimHeight:a(this.element).data("trim-height")?a(this.element).data("trim-height"):!1,listenTo:a(this.element).data("listen-to")?a(this.element).data("listen-to"):!1},c||{}),this.align=this.settings.align?this.settings.align.split(","):[],this.height=this.element.height(),this.elements=a(this.element).children();for(var e=0;e<this.elements.length;e++)a(this.elements[e]).css({position:"absolute","max-width":"10000px"}),a(this.elements[e]).data("inViewPort",d);this.start=function(){if(this.element.on("DigitopiaScaleChanged."+this.id,function(a,b){a.stopPropagation(),a.target===this&&(d.settings.trimHeight||(d.height=d.element.height()),d.fitElements(b))}),this.settings.listenTo){var b=a(this.settings.listenTo).attr("id");this.element.on("digitopiaContainerDidResize"+b+"."+this.id,function(a){a.stopPropagation(),a.target===this&&d.fitElements()})}else this.element.on("DigitopiaDidResize."+this.id,function(a){a.stopPropagation(),a.target===this&&d.fitElements()});this.fitElements()},this.stop=function(){if(this.element.off("DigitopiaScaleChanged."+this.id),this.settings.listenTo){var b=a(this.settings.listenTo).attr("id");this.element.off("digitopiaContainerDidResize"+b+"."+this.id)}else this.element.off("DigitopiaDidResize."+this.id)},this.getAlign=function(a){this.align=this.settings.align?this.settings.align.split(","):[];for(var b=0;b<this.align.length;b++)if(this.align[b]===a)return!0;return!1},this.fitElements=function(){for(var b=0;b<this.elements.length;b++){var c=this.elements[b],d=a(c).data("width"),e=a(c).data("height"),f=a(this.element).width(),g=a(this.element).height();this.settings.trimHeight&&(g=this.height);var h=e/d,i=g/f,j=1;j=this.settings.crop?i>h?g/e:f/d:h>i?g/e:f/d,d*=j,e*=j,this.settings.blowup||(a(c).data("width")&&d>a(c).data("width")&&(d=a(c).data("width")),a(c).data("height")&&e>a(c).data("height")&&(e=a(c).data("height"))),this.settings.trimHeight&&(a(this.element).height(e),g=e);var k=(g-e)/2,l=(f-d)/2;this.getAlign("top")&&(k=0),this.getAlign("bottom")&&(k=g-e),this.getAlign("left")&&(l=0),this.getAlign("right")&&(l=f-d);var m={top:k+"px",left:l+"px",width:d+"px",height:e+"px"};a(c).css(m)}}};a.fn.digitopiaViewport=GetJQueryPlugin("digitopiaViewport",b)}(jQuery),function(a){var b=function(b,c){this.element=a(b);var d=this;this.id=b.id,this.scale=void 0,this.loaded=!1,this.settings=a.extend({enabledScales:a(this.element).data("enabled-scales")?a(this.element).data("enabled-scales").split(","):[]},c||{}),this.start=function(){this.loaded||(a(this.element).addClass("responsive-loading"),this.element.on("DigitopiaScaleChanged."+this.id,function(a,b){a.stopPropagation(),a.target===this&&(d.scale=b,d.lazy())}),this.element.on("DigitopiaDidScroll."+this.id,function(a,b){a.stopPropagation(),a.target===this&&d.lazy()}),this.element.on("DigitopiaDidResize."+this.id,function(a,b){a.stopPropagation(),a.target===this&&d.lazy()}),this.element.on("DigitopiaLazy."+this.id,function(a,b){a.stopPropagation(),a.target===this&&d.lazy(b)}),this.lazy())},this.stop=function(){this.element.off("DigitopiaScaleChanged."+this.id),this.element.off("DigitopiaDidScroll."+this.id),this.element.off("DigitopiaDidResize."+this.id),this.element.off("DigitopiaLazy."+this.id)},this.want=function(){return this.settings.enabledScales.length?this.scale?-1!==this.settings.enabledScales.indexOf(this.scale):!1:!0},this.lazy=function(b){!this.loaded&&this.want()&&(b||a.inviewport(this.element,{threshold:0})&&a(this.element).is(":visible"))&&(this.element.removeClass("responsive-loading"),this.element.trigger("digitopiaLazyLoad"),this.loaded=!0)}},c=function(b,c){this.element=a(b);var d=this;this.id=b.id,this.loaded=!1,this.scale=void 0,this.loadedScale=void 0,this.start=function(){this.element.on("digitopiaLazyLoad."+this.id,function(a,b){a.stopPropagation(),d.lazy(b)}),this.element.on("DigitopiaScaleChanged."+this.id,function(a,b){a.stopPropagation(),d.scale=b,d.loaded&&d.loadedScale!=d.scale&&d.load()}),setTimeout(function(){d.element.digitopiaLazy()},0)},this.stop=function(){this.element.off("digitopiaLazyLoad."+this.id),this.element.off("DigitopiaScaleChanged."+this.id)},this.lazy=function(a){this.loaded||this.load()},this.load=function(b){var c=a(this.element).data("lazy-src");a(this.element).data("lazy-"+this.scale+"-src")&&(c=a(this.element).data("lazy-"+this.scale+"-src")),a(d.element).attr("src")!=c&&a(d.element).css({opacity:0}).attr("src",c).load(function(){if(this.complete&&"undefined"!=typeof this.naturalWidth&&0!==this.naturalWidth){a(this).data("width",this.naturalWidth),a(this).data("height",this.naturalHeight),a(this).data("inViewPort")&&a(this).data("inViewPort").fitElements();var b=this;setTimeout(function(){a(b).animate({opacity:1},250)},0)}}).error(function(){}),this.loaded=!0,this.loadedScale=this.scale}};a.fn.digitopiaLazy=GetJQueryPlugin("digitopiaLazy",b),a.fn.digitopiaLazyImg=GetJQueryPlugin("digitopiaLazyImg",c)}(jQuery),function(a){var b=function(b,c){this.element=a(b);var d=this;this.id=b.id,this.settings=a.extend({scales:this.element.data("scales")?this.element.data("scales").split(/\s*,\s*/):[],followElementWidth:this.element.data("follow-element-width"),followElementHeight:this.element.data("follow-element-height"),fillContainer:this.element.data("fill-container")},c||{}),this.active=void 0,this.settings.scales.length||(this.active=!0),this.origHeight=b.style.height,this.origWidth=b.style.width,this.lastHeight=void 0,this.lastWidth=void 0,this.listenTo={},this.following=0,this.settings.followElementWidth&&(++this.following,this.listenTo[a(this.settings.followElementWidth).attr("id")]=!0),this.settings.followElementHeight&&(++this.following,this.listenTo[a(this.settings.followElementHeight).attr("id")]=!0),this.settings.fillContainer&&(++this.following,"parent"===this.settings.fillContainer?(setTimeout(function(){d.element.parent().digitopiaContainer()},0),this.listenTo[this.element.parent().attr("id")]=!0):(setTimeout(function(){a(d.settings.fillContainer).digitopiaContainer()},0),this.listenTo[a(this.settings.fillContainer).attr("id")]=!0)),this.start=function(){if(this.element.on("DigitopiaScaleChanged."+this.id,function(a,b){a.stopPropagation(),a.target===this&&d.watchScale(b)}),this.following)for(var a in this.listenTo)this.element.on("digitopiaContainerDidResize"+a+"."+this.id,function(a){a.stopPropagation(),a.target===this&&d.handleResize()});else this.element.on("DigitopiaDidResize."+this.id,function(a){a.stopPropagation(),a.target===this&&d.handleResize()});this.handleResize()},this.stop=function(){if(this.element.off("DigitopiaScaleChanged."+this.id),this.following)for(var a in this.listenTo)this.element.off("digitopiaContainerDidResize"+a+"."+this.id);else this.element.off("DigitopiaDidResize."+this.id)},this.watchScale=function(a){var b=this.active;if(this.settings.scales.length){this.active=!1;for(var c=0;c<this.settings.scales.length;c++)this.settings.scales[c]===a&&(this.active=!0)}else this.active=!0;this.active||this.element.css({width:this.origWidth?this.origWidth:"",height:this.origHeight?this.origHeight:""}),b!=this.active,this.handleResize()},this.handleResize=function(){var b=!1,c=this.element.innerWidth(),d=this.element.innerHeight();if((this.active||void 0===this.active)&&(this.settings.followElementWidth&&c!=a(this.settings.followElementWidth).innerWidth()&&(++b,c=a(this.settings.followElementWidth).innerWidth(),this.element.outerWidth(c)),this.settings.followElementHeight&&d!=a(this.settings.followElementHeight).innerHeight())){++b;var d=a(this.settings.followElementHeight).innerHeight();this.element.outerHeight(d)}if(this.settings.fillContainer){var e=void 0;e="parent"===this.settings.fillContainer?this.element.parent():a(this.settings.fillContainer),c!=e.innerWidth()&&(++b,c=e.innerWidth(),this.element.outerWidth(c)),d!=e.innerHeight()&&(++b,d=e.innerHeight(),this.element.outerHeight(d))}(b||c!=this.lastWidth||d!=this.lastHeight)&&(this.element.find(".DigitopiaInstance").trigger("digitopiaContainerDidResize"),a(".DigitopiaInstance").trigger("digitopiaContainerDidResize"+this.id),this.lastWidth=c,this.lastHeight=d)}};a.fn.digitopiaContainer=GetJQueryPlugin("digitopiaContainer",b)}(jQuery),function(a){var b=function(b,c){this.element=a(b),this.id=b.id;var d=this;this.settings=a.extend({src:a(this.element).data("src")?a(this.element).data("src"):void 0,type:a(this.element).data("type")?a(this.element).data("type"):"html",inline:a(this.element).data("inline"),noLazy:a(this.element).data("no-lazy")?a(this.element).data("no-lazy"):!1,showLoading:a(this.element).data("show-loading")?a(this.element).data("show-loading"):!1,clientCache:a(this.element).data("client-cache")?a(this.element).data("client-cache"):!1,clientCacheKey:a(this.element).data("cache-key")?a(this.element).data("cache-key"):void 0,args:a(this.element).data("args")?JSON.parse(a(this.element).data("args")):{}},c||{}),this.loaded=!1,this.start=function(){this.settings.noLazy?this.ajaxLayer():(this.element.on("digitopiaLazyLoad."+this.id,function(a,b){a.stopPropagation(),a.target===this&&d.ajaxLayer()}),setTimeout(function(){d.element.digitopiaLazy(d.settings)},0))},this.stop=function(){this.settings.noLazy||this.element.off("digitopiaLazyLoad."+this.id)},this.reload=function(){this.loaded=!1,this.ajaxLayer(!0)},this.ajaxLayer=function(){if(!this.loaded){this.loaded=!0;var b=void 0;if(this.settings.clientCache){var c=this.id;this.settings.clientCacheKey&&(c+="-"+this.settings.clientCacheKey),b=this.isCached(this.settings.clientCache,c)}b?this.ready(b):(this.ajaxRequest(),this.settings.showLoading&&a(this.element).addClass("responsive-loading"))}},this.ajaxRequest=function(){var b=this.settings.src;"undefined"!=typeof rewriteUrls&&(b=rewriteUrls(b)),a.ajax({type:"GET",url:b+"?"+jQuery.param(this.settings.args),dataType:this.settings.type,success:function(a){if(d.settings.clientCache){var b=d.id;d.settings.clientCacheKey&&(b+="-"+d.settings.clientCacheKey),d.cacheIt(d.settings.clientCache,b,a)}d.ready(a)},error:function(a,b,c){a.responseText&&alert(a.responseText)}})},this.ready=function(b){this.element.removeClass("responsive-loading"),this.settings.inline&&(this.element.empty().append(b),a("body").data("digitopiaHijax")&&a("body").data("digitopiaHijax").hijaxLinks(this.element),a("body").trigger("DigitopiaInstantiate")),this.element.trigger("data",b)},this.cacheIt=function(a,b,c){"localStorage"===a?Modernizr.localstorage&&(localStorage[b]=JSON.stringify(c)):"sessionStorage"===a&&Modernizr.sessionstorage&&(sessionStorage[b]=JSON.stringify(c))},this.isCached=function(a,b){var c;return"localStorage"===a?Modernizr.localstorage&&(c=localStorage[b]):"sessionStorage"===a&&Modernizr.sessionstorage&&(c=sessionStorage[b]),void 0!=c&&(c=JSON.parse(c)),c}};a.fn.digitopiaAjax=GetJQueryPlugin("digitopiaAjax",b)}(jQuery),function(a){function b(a){var b=a.pathname+a.search;return b}var c=function(c,d){this.element=a(c);var e=this;this.currentPath=void 0,this.startTime=void 0,this.settings=a.extend({processOriginalPath:!1,locationHash:!1,popState:Modernizr.history,excludeRegex:new RegExp("^(//|http|javascript|mailto|#)"),contentHandlers:[],debounce:void 0,disableScrollAnimation:!1,scrollTop:0,nextScrollTop:0},d||{}),this.settings.processOriginalPath||(this.currentPath=b(document.location)),this.start=function(){this.hijaxLinks(this.element),this.settings.locationHash&&(a(window).bind("hashchange.hijax",function(){e.watchLocationHash()}),this.watchLocationHash()),this.settings.popState&&(a(window).bind("popstate.hijax",function(a){e.watchPopState(a)}),e.watchPopState()),a(this.element).on("DigitopiaReloadPage",function(b,c){b.stopPropagation(),b.target===this&&(e.settings.nextScrollTop=a(window).scrollTop(),e.hijaxLoad(e.currentPath,e.currentPath))}),a(this.element).on("DigitopiaLoadPage",function(a,c){a.stopPropagation(),a.target===this&&(e.settings.popState||e.settings.locationHash?c&&!e.settings.excludeRegex.exec(c)&&b(document.location)!==c&&(e.settings.locationHash?e.setLocationHash("hijax"+c):e.settings.popState&&(history.pushState(null,null,c),e.watchPopState())):document.location.href=c)})},this.stop=function(){a("a").unbind("click.hijax"),this.settings.popState&&a(window).unbind("popstate.hijax"),a(this.element).off("DigitopiaLoadPage"),a(this.element).off("DigitopiaReloadPage")},this.hijaxLoad=function(b,c){var d=!1;if("undefined"!=typeof rewriteUrls&&(b=rewriteUrls(b)),a(".DigitopiaInstance").trigger("DigitopiaWillLoadNewPage",[c,b]),this.settings.debounce&&(this.startTime=new Date),this.settings.contentHandlers.length)for(var f=0;f<this.settings.contentHandlers.length;f++){var g=b.match(this.settings.contentHandlers[f].path);if(g){var h=void 0;h=this.settings.contentHandlers[f].content?this.settings.contentHandlers[f].content:this.settings.contentHandlers[f].contentHandler(g),e.mergeContent(h),d=!0}}d||a.ajax({type:"GET",url:b,dataType:"html",success:function(a){e.mergeContent(a)},error:function(a,b,c){a.responseText&&alert("could not load page.")}})},this.mergeContent=function(b){a(".DigitopiaInstance").trigger("DigitopiaDidLoadNewPageContent");var c=0;if(this.settings.debounce){var d=new Date;c=d.getTime()-this.startTime.getTime()}if(this.settings.debounce&&c<e.settings.debounce)setTimeout(function(a,b){return function(){a.mergeContent(b)}}(this,b),e.settings.debounce-c);else{var f=this.settings.nextScrollTop;this.settings.disableScrollAnimation?a("html, body").scrollTop(f):a("html, body").animate({scrollTop:f},"250");var g=a("[data-hijax]");g.each(function(){var b=this.id;a("#"+b).find(".DigitopiaInstance").trigger("DigitopiaStop"),a("#"+b).trigger("DigitopiaStop")});var h=b.split(/(<body[^>]*>|<\/body>)/gi),i=a(h[2]);g.each(function(){var b=this.id,c="";c=a(i).find("#"+b),c&&0!==c.length||(c=a(i).filter("#"+b)),a("#"+b).empty().append(c.children())});var j=a(b).filter("title").text();document.title=j,this.contentMerged()}},this.contentMerged=function(){var c=a("[data-hijax]");c.each(function(){var a=this.id;e.hijaxLinks("#"+a)}),a(".DigitopiaInstance").trigger("DigitopiaInstantiate"),a(".DigitopiaInstance").trigger("DigitopiaDidLoadNewPage",b(document.location))},this.hijaxLinks=function(b){a(b).find("a").unbind("click.hijax"),a(b).find("a").each(function(){var b=a(this).attr("href");!b||a(this).attr("target")||a(this).data("no-hijax")||e.settings.excludeRegex.exec(b)||a(this).bind("click.hijax",function(c){c.preventDefault(),a("body").trigger("DigitopiaLoadPage",b)})})},this.watchPopState=function(a){if((this.currentPath||void 0===this.currentPath&&this.settings.processOriginalPath)&&b(document.location)!=this.currentPath){var c=this.currentPath;this.currentPath=b(document.location),this.settings.nextScrollTop=this.settings.scrollTop,this.hijaxLoad(this.currentPath,c)}},this.setLocationHash=function(a){location.hash=a},this.watchLocationHash=function(){if(location.hash!=this.currentPath){var a=location.hash.split("/");if("#hijax"==a[0]){var b=this.currentPath;a.splice(0,1),this.currentPath="/"+a.join("/"),this.settings.nextScrollTop=this.settings.scrollTop,this.hijaxLoad(this.currentPath,b)}}}};a.fn.digitopiaHijax=GetJQueryPlugin("digitopiaHijax",c)}(jQuery),function(a){function b(b,c){function d(a){f||requestAnimationFrame(a)}this.element=a(b),this.options=void 0,this.animation=c,this.pcnt=0,this.lastpcnt=0;var e=this;this.cached=!1;var f=!0;this.newAnimation=function(a){this.animation=a,this.cached=!1,this.prepare()},this.start=function(){this.prepare(),a(window).focus(function(){e.pcnt<1&&e.options&&(f=!1,d(function(){e.starts=Date.now()-e.options.duration*e.pcnt,d(function(){e.timer()})}))}),a(window).blur(function(){f=!0}),this.element.on("play",function(a,b){a.target==this&&(e.options=b,e.resume())}),this.element.on("pause",function(a,b){a.target==this&&(f=!0)}),this.element.on("scrub",function(a,b){a.target==this&&(e.options=b,e.pcnt=e.options.time/e.options.duration,e.pcnt=Math.round(1e4*e.pcnt)/1e4,e.pcnt!=e.lastpcnt&&(e.action(),e.lastpcnt=e.pcnt))})},this.stop=function(){f=!0,this.element.off("play"),this.element.off("pause"),this.element.off("scrub")},this.resume=function(){f=!1,d(function(){e.pcnt=0,e.cached=!1,e.prepare(),e.starts=Date.now(),d(function(){e.timer()})})},this.timer=function(){if(!f){var a=Date.now();this.pcnt=(a-this.starts)/this.options.duration,-1==this.options.direction&&(this.pcnt=1-this.pcnt),this.pcnt<0&&(this.pcnt=0),this.pcnt>1&&(this.pcnt=1),this.pcnt=Math.round(1e4*this.pcnt)/1e4,this.pcnt!=this.lastpcnt&&(this.action(),this.lastpcnt=this.pcnt),this.pcnt>0&&this.pcnt<1?d(function(){e.timer()}):(this.options.onComplete&&this.options.onComplete(),this.options.loop&&(this.options.direction=-1*this.options.direction,this.start()))}},this.action=function(){for(var a=0;a<this.animation.quelist.length;a++)this.performQue(this.animation.quelist[a])},this.prepare=function(){if(!this.cached){this.cached=!0;var a=/[\-+]?[\d]*\.?[\d]+/g;for(q=0;q<this.animation.quelist.length;q++){var b=this.animation.quelist[q];if(b.frame_in_progress=void 0,b.keyframes)for(var c=0;c<b.keyframes.length;c++){b.keyframes[c].cached={};for(var d in b.keyframes[c].css){b.keyframes[c].cached[d]={vals:[]};var e=b.keyframes[c].css[d].replace(a,function(a){return b.keyframes[c].cached[d].vals.push(+a),"{?}"});b.keyframes[c].cached[d].format=e}}}}},this.doTrigger=function(b,c){f||(c.css&&a(b).css(c.css),c.callback&&c.callback.call())},this.performQue=function(b){if(b.triggers&&b.triggers.length)for(var c=0;c<b.triggers.length;c++){var f=b.triggers[c];-1==e.options.direction?this.pcnt<=f.percent/100&&(f.firedReverse||(f.firedReverse=!0,f.firedForward=!1,e.doTrigger(b.element,f.reverse))):this.pcnt>=f.percent/100&&(f.firedForward||(f.firedForward=!0,f.firedReverse=!1,e.doTrigger(b.element,f.forward)))}if(b.keyframes&&b.keyframes.length){var g=b.keyframes[0].percent/100,h=b.keyframes[b.keyframes.length-1].percent/100,i=(h-g)*this.options.duration,j=b.easing,k=void 0,l=void 0;if(this.pcnt>=g&&this.pcnt<=h){if(-1==e.options.direction)for(var c=b.keyframes.length-1;c>=1;c--)this.pcnt<=b.keyframes[c].percent/100&&(k=c-1,l=c);else for(var c=1;c<b.keyframes.length;c++)if(this.pcnt<=b.keyframes[c].percent/100){k=c,l=c-1;break}b.keyframes[k].easing&&(j=b.keyframes[k].easing);var m=(100*this.pcnt-b.keyframes[l].percent)/(b.keyframes[k].percent-b.keyframes[l].percent);m=Math.round(100*m)/100;var n={};for(var o in b.keyframes[l].css){for(var p=/\{\?\}/,q=b.keyframes[k].cached[o].format,r=0;r<b.keyframes[k].cached[o].vals.length;r++){var s=parseFloat(b.keyframes[l].cached[o].vals[r]),t=b.keyframes[k].cached[o].vals[r],u=t-s,v=void 0;v=j?a.easing[j](m,m*i,s,u,i):s+u*m,q=q.replace(p,v)}n[o]=q}var w=function(a,b){return function(){a.css(b)}}(a(b.element),n);d(w)}if(void 0!=b.frame_in_progress&&k!=b.frame_in_progress){var n=b.keyframes[b.frame_in_progress].css;b.frame_in_progress=void 0;var w=function(a,b){return function(){a.css(b)}}(a(b.element),n);d(w)}b.frame_in_progress=k}}}a.fn.wiggler=GetJQueryPlugin("wiggler",b)}(jQuery);